(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[479],{31199:function(re,w,e){"use strict";var s=e(28991),E=e(81253),y=e(85893),U=e(67294),M=e(31649),R=["fieldProps","min","proFieldProps","max"],j=function(Z,F){var O=Z.fieldProps,G=Z.min,B=Z.proFieldProps,L=Z.max,c=(0,E.Z)(Z,R);return(0,y.jsx)(M.Z,(0,s.Z)({valueType:"digit",fieldProps:(0,s.Z)({min:G,max:L},O),ref:F,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:B},c))};w.Z=U.forwardRef(j)},86615:function(re,w,e){"use strict";var s=e(88983),E=e(47933),y=e(28991),U=e(81253),M=e(85893),R=e(22270),j=e(67294),Y=e(74115),Z=e(31649),F=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],O=j.forwardRef(function(c,D){var f=c.fieldProps,b=c.options,N=c.radioType,V=c.layout,I=c.proFieldProps,T=c.valueEnum,_=(0,U.Z)(c,F);return(0,M.jsx)(Z.Z,(0,y.Z)((0,y.Z)({valueType:N==="button"?"radioButton":"radio",ref:D,valueEnum:(0,R.h)(T,void 0)},_),{},{fieldProps:(0,y.Z)({options:b,layout:V},f),proFieldProps:I,filedConfig:{customLightMode:!0}}))}),G=j.forwardRef(function(c,D){var f=c.fieldProps,b=c.children;return(0,M.jsx)(E.ZP,(0,y.Z)((0,y.Z)({},f),{},{ref:D,children:b}))}),B=(0,Y.G)(G,{valuePropName:"checked",ignoreWidth:!0}),L=B;L.Group=O,L.Button=E.ZP.Button,L.displayName="ProFormComponent",w.Z=L},88456:function(re,w,e){"use strict";e.r(w),e.d(w,{MenuTypeEnum:function(){return a},default:function(){return Fe},menuTypeArr:function(){return ue},menuTypeMap:function(){return se}});var s=e(71194),E=e(50146),y=e(57338),U=e(83107),M=e(11849),R=e(57663),j=e(71577),Y=e(62350),Z=e(24565),F=e(39428),O=e(3182),G=e(49111),B=e(19650),L=e(71153),c=e(60331),D=e(2824),f=e(67294),b=e(49101),N=e(78009),V=e(40759),I=e(75159),T=e(85833),_=e(62999),ae=e(54680),z=e(952),r=e(71975),o=e(86615),P=e(5966),n=e(31199),H=e(52688),t=e(85893),Pe={labelCol:{span:5},wrapperCol:{span:19}},Me=function(p){var q=(0,f.useState)(a.FOLDER),ee=(0,D.Z)(q,2),g=ee[0],ne=ee[1],X=function(v){switch(g){case a.FOLDER:return!1;case a.MENU:return!1;case a.PERMISSION:return v!==a.MENU;default:return!1}},u=function $(v){var C=[];return Array.isArray(v)&&(v==null||v.forEach(function(x){var W={};W.key=x.id,W.value=x.id,W.title=x.name,W.disabled=X(a[x.type]),W.children=x.children?$(x.children):[],!(g===a.FOLDER&&a[x.type]!==a.FOLDER)&&(g!==a.FOLDER&&g===a[x.type]||C.push(W))})),C},J=function(v){return[{key:0,value:"0",title:"\u9876\u7EA7\u76EE\u5F55",disabled:X(a.FOLDER),children:u(v)}]};return(0,t.jsxs)(r.a,(0,M.Z)((0,M.Z)({title:p.isAdd?"\u65B0\u5EFA\u83DC\u5355":"\u66F4\u65B0\u83DC\u5355",width:"600px",formRef:p.formRef},Pe),{},{visible:p.visible,layout:"horizontal",onVisibleChange:function(v){if(p.onVisibleChange&&p.onVisibleChange(v),v){var C,x=a[p==null||(C=p.initialValues)===null||C===void 0?void 0:C.type];ne(x||a.FOLDER)}},onFinish:p.onFinish,initialValues:p.initialValues,children:[(0,t.jsx)(o.Z.Group,{label:"\u83DC\u5355\u7C7B\u578B",radioType:"button",disabled:!p.isAdd,fieldProps:{value:g,buttonStyle:"solid",onChange:function(v){var C;ne(v.target.value),(C=p.formRef.current)===null||C===void 0||C.setFieldsValue((0,M.Z)((0,M.Z)({},p.formRef.current.getFieldsValue()),{},{pid:void 0}))}},options:ue,name:"type"}),(0,t.jsx)(P.Z,{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u540D\u79F0",name:"name"}),(0,t.jsx)(z.ZP.Item,{label:"\u4E0A\u7EA7",name:"pid",rules:[{required:!0,message:"\u4E0A\u7EA7\u4E3A\u5FC5\u9009\u9879"}],children:(0,t.jsx)(ae.Z,{style:{width:"100%"},listHeight:300,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:J(p.menuDataList),placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0})}),(0,t.jsx)(n.Z,{rules:[{required:!0,message:"\u6392\u5E8F\u4E3A\u5FC5\u586B\u9879"}],label:"\u6392\u5E8F",name:"sort",min:1,max:99}),(g===a.FOLDER||g===a.MENU)&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(P.Z,{label:"\u56FE\u6807",name:"icon"}),(0,t.jsx)(H.Z,{name:"switch",label:"\u662F\u5426\u9690\u85CF"}),(0,t.jsx)(P.Z,{rules:[{required:!0,message:"\u8DEF\u7531\u8DEF\u5F84\u4E3A\u5FC5\u586B\u9879"}],label:"\u8DEF\u7531\u8DEF\u5F84",name:"path"})]}),g===a.MENU&&(0,t.jsx)(P.Z,{rules:[{required:!0,message:"\u7EC4\u4EF6\u8DEF\u5F84\u4E3A\u5FC5\u586B\u9879"}],label:"\u7EC4\u4EF6\u8DEF\u5F84",name:"component"}),g===a.PERMISSION&&(0,t.jsx)(P.Z,{rules:[{required:!0,message:"\u6743\u9650\u7F16\u7801\u4E3A\u5FC5\u586B\u9879"}],label:"\u6743\u9650\u7F16\u7801",name:"permission"})]}))},Ze=Me,le=e(98435),De=e(96486),ge=e.n(De),a;(function(Q){Q.FOLDER="FOLDER",Q.MENU="MENU",Q.PERMISSION="PERMISSION"})(a||(a={}));var se=new Map([[a.FOLDER,{label:"\u76EE\u5F55",value:a.FOLDER,color:"success"}],[a.MENU,{label:"\u83DC\u5355",value:a.MENU,color:"processing"}],[a.PERMISSION,{label:"\u6743\u9650",value:a.PERMISSION,color:"warning"}]]),ue=Array.from(se.values()),Re=function(){var p=(0,f.useState)(!1),q=(0,D.Z)(p,2),ee=q[0],g=q[1],ne=(0,f.useState)(),X=(0,D.Z)(ne,2),u=X[0],J=X[1],$=(0,f.useState)(),v=(0,D.Z)($,2),C=v[0],x=v[1],W=(0,f.useState)(!1),de=(0,D.Z)(W,2),ce=de[0],fe=de[1],Ce=(0,f.useState)([]),me=(0,D.Z)(Ce,2),Oe=me[0],Te=me[1],xe=(0,f.useState)(!1),pe=(0,D.Z)(xe,2),ve=pe[0],ie=pe[1],S=(0,f.useRef)(),k=(0,f.useRef)(),te=(0,f.useRef)(),Ie=(0,f.useState)(),he=(0,D.Z)(Ie,2),Ee=he[0],oe=he[1],Se=[{title:"\u83DC\u5355\u540D\u79F0",width:180,dataIndex:"name"},{title:"\u7C7B\u578B",width:60,align:"center",dataIndex:"type",render:function(i,l){var d=ue.find(function(K){return K.value===l.type});return(0,t.jsx)(B.Z,{children:(0,t.jsx)(c.Z,{color:d==null?void 0:d.color,children:d==null?void 0:d.label},d==null?void 0:d.label)})}},{title:"\u56FE\u6807",width:30,align:"center",dataIndex:"icon"},{title:"\u6392\u5E8F",width:40,dataIndex:"sort",align:"right"},{title:"\u8DEF\u7531\u8DEF\u5F84",width:160,dataIndex:"path"},{title:"\u7EC4\u4EF6\u8DEF\u5F84",width:160,dataIndex:"component"},{title:"\u6743\u9650\u7F16\u7801",width:120,dataIndex:"permission"},{title:"\u521B\u5EFA\u65F6\u95F4",width:140,align:"center",dataIndex:"createTime"},{title:"\u64CD\u4F5C",width:180,align:"center",key:"option",valueType:"option",render:function(i,l){return[(0,t.jsx)("a",{onClick:function(){g(!0),J(l)},children:"\u7F16\u8F91"},"update"),(0,t.jsx)("a",{onClick:(0,O.Z)((0,F.Z)().mark(function d(){return(0,F.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:fe(!0),J(l);case 2:case"end":return m.stop()}},d)})),children:"\u7AEF\u70B9\u5206\u914D"},"config"),(0,t.jsx)(Z.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u8BB0\u5F55\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:(0,O.Z)((0,F.Z)().mark(function d(){return(0,F.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,I.fn(T.RD,l.id);case 2:k.current&&k.current.reload();case 3:case"end":return m.stop()}},d)})),children:(0,t.jsx)("a",{href:"#",children:"\u5220\u9664"},"delete")},"popconfirm")]}}],ye=[{title:"\u7AEF\u70B9\u540D\u79F0",dataIndex:"label"},{title:"\u7AEF\u70B9\u8DEF\u5F84",dataIndex:"pattern"},{title:"\u8BF7\u6C42\u65B9\u6CD5",align:"center",dataIndex:"method",valueType:"select",valueEnum:{POST:{text:"POST"},PUT:{text:"PUT"},GET:{text:"GET"},DELETE:{text:"DELETE"}},render:function(i,l){return(0,t.jsx)(c.Z,{color:le.methodMap[l.method].color,children:le.methodMap[l.method].text})}}],je=ge().concat(ye,{title:"\u64CD\u4F5C",align:"center",key:"option",valueType:"option",render:function(i,l){return[(0,t.jsx)(Z.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u8BB0\u5F55\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:(0,O.Z)((0,F.Z)().mark(function d(){return(0,F.Z)().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,I.fn(T.W0,{menuId:u==null?void 0:u.id,endpointId:l.id});case 2:te.current&&te.current.reload();case 3:case"end":return m.stop()}},d)})),children:(0,t.jsx)("a",{href:"#",children:"\u5220\u9664"},"delete")},"popconfirm")]}});return(0,t.jsxs)(N.ZP,{header:{breadcrumb:{}},children:[(0,t.jsx)(V.ZP,{columns:Se,actionRef:k,request:T.DC,footer:function(){return""},postData:function(i){return x(i),i},rowKey:"id",pagination:!1,expandable:{expandRowByClick:!1},search:!1,dateFormatter:"string",headerTitle:"\u83DC\u5355\u7BA1\u7406",toolBarRender:function(){return[(0,t.jsxs)(j.Z,{type:"primary",onClick:function(){var l;S==null||(l=S.current)===null||l===void 0||l.resetFields(),J(void 0),g(!0)},children:[(0,t.jsx)(b.Z,{})," \u65B0\u5EFA"]},"primary")]}}),C&&(0,t.jsx)(Ze,{formRef:S,visible:ee,initialValues:u||{type:a.FOLDER},isAdd:!(u!=null&&u.id),menuDataList:C,onVisibleChange:function(i){if(i){var l;S==null||(l=S.current)===null||l===void 0||l.resetFields()}else g(!1),J(void 0)},onFinish:function(){var h=(0,O.Z)((0,F.Z)().mark(function i(l){var d,K,m;return(0,F.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(d=(0,M.Z)((0,M.Z)({},u),l),d.id){A.next=7;break}return A.next=4,I.ii(d,T.bL);case 4:K=A.sent,A.next=10;break;case 7:return A.next=9,I.He(d,T._8);case 9:K=A.sent;case 10:K&&(g(!1),S==null||(m=S.current)===null||m===void 0||m.resetFields(),k.current&&k.current.reload());case 11:case"end":return A.stop()}},i)}));return function(i){return h.apply(this,arguments)}}()}),(0,t.jsx)(U.Z,{title:u==null?void 0:u.name,width:800,visible:ce,onClose:function(){fe(!1)},closable:!1,children:ce&&(0,t.jsx)(V.ZP,{actionRef:te,columns:je,params:{menuId:u==null?void 0:u.id},request:T.t7,onLoad:function(i){Te(i.map(function(l){return l.id}))},rowKey:"id",pagination:{showQuickJumper:!0},search:!1,dateFormatter:"string",headerTitle:u==null?void 0:u.name,toolBarRender:function(){return[(0,t.jsxs)(j.Z,{type:"primary",onClick:function(){ie(!0)},children:[(0,t.jsx)(b.Z,{})," \u65B0\u5EFA"]},"primary")]}})}),ve&&(0,t.jsx)(E.Z,{title:"\u5206\u914D\u7AEF\u70B9",visible:ve,onOk:function(){(0,T.dc)(u==null?void 0:u.id,Ee).then(function(){var i;oe(void 0),(i=te.current)===null||i===void 0||i.reload(),ie(!1)})},onCancel:function(){oe(void 0),ie(!1)},children:(0,t.jsx)(V.ZP,{columns:ye,rowSelection:{selectedRowKeys:Ee,onChange:function(i){oe(i)},getCheckboxProps:function(i){return{disabled:Oe.indexOf(i.id)>-1}}},params:{menuId:u==null?void 0:u.id},request:T.BD,rowKey:"id",pagination:{showQuickJumper:!0},search:!1,options:!1,defaultSize:"small",dateFormatter:"string"})})]})},Fe=Re},85833:function(re,w,e){"use strict";e.d(w,{DC:function(){return Y},_8:function(){return G},bL:function(){return L},RD:function(){return D},t7:function(){return b},W0:function(){return V},dc:function(){return T},BD:function(){return ae}});var s=e(39428),E=e(3182),y=e(90102),U=e(45254),M=e(50208),R=(0,U.Ui)("/menu"),j=(0,U.Ui)("/endpoint");function Y(r){return Z.apply(this,arguments)}function Z(){return Z=(0,E.Z)((0,s.Z)().mark(function r(o){return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.gh(R,o));case 1:case"end":return n.stop()}},r)})),Z.apply(this,arguments)}function F(r){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function r(o){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",YuApi.getById(o,R));case 1:case"end":return n.stop()}},r)})),O.apply(this,arguments)}function G(r){return B.apply(this,arguments)}function B(){return B=(0,E.Z)((0,s.Z)().mark(function r(o){return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.Vx(R,o));case 1:case"end":return n.stop()}},r)})),B.apply(this,arguments)}function L(r){return c.apply(this,arguments)}function c(){return c=(0,E.Z)((0,s.Z)().mark(function r(o){return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.IH(o,R));case 1:case"end":return n.stop()}},r)})),c.apply(this,arguments)}function D(r){return f.apply(this,arguments)}function f(){return f=(0,E.Z)((0,s.Z)().mark(function r(o){return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.Jp(o,R));case 1:case"end":return n.stop()}},r)})),f.apply(this,arguments)}function b(r){return N.apply(this,arguments)}function N(){return N=(0,E.Z)((0,s.Z)().mark(function r(o){return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.et("".concat(R,"/").concat(o.menuId,"/endpoints"),o));case 1:case"end":return n.stop()}},r)})),N.apply(this,arguments)}function V(r){return I.apply(this,arguments)}function I(){return I=(0,E.Z)((0,s.Z)().mark(function r(o){return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,M.WY)("".concat(R,"/").concat(o.menuId,"/endpoints/").concat(o.endpointId),{method:"delete"}));case 1:case"end":return n.stop()}},r)})),I.apply(this,arguments)}function T(r,o){return _.apply(this,arguments)}function _(){return _=(0,E.Z)((0,s.Z)().mark(function r(o,P){return(0,s.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.abrupt("return",(0,M.WY)("".concat(R,"/").concat(o,"/endpoints"),{method:"POST",data:{endpointIds:P}}));case 1:case"end":return H.stop()}},r)})),_.apply(this,arguments)}function ae(r){return z.apply(this,arguments)}function z(){return z=(0,E.Z)((0,s.Z)().mark(function r(o){return(0,s.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.et(j,o));case 1:case"end":return n.stop()}},r)})),z.apply(this,arguments)}}}]);
