(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[298],{33107:function(Y,j,t){"use strict";var T=t(86582),d=t(2824),i=t(67294),y=t(6934),m=t(60171),p=t(24557),x=t(49e3),O=t(50208),W=t(45254),L=t(90102),a=t(85893),b=function P(o){var g=[];return Array.isArray(o)&&(o==null||o.forEach(function(l){var r={};l.id==="0"?r.icon=(0,a.jsx)(p.Z,{}):r.icon=(0,a.jsx)(x.Z,{}),r.key=l.id,r.value=l.id,r.name=l.name,r.title=l.name,r.deptTypeId=l.typeId,r.children=l.children?P(l.children):[],g.push(r)})),g},N=function P(o,g){for(var l,r=0;r<g.length;r++){var e=g[r];e.children&&(e.children.some(function(f){return f.key===o})?l=e.key:P(o,e.children)&&(l=P(o,e.children)))}return l},_=function(o){var g=(0,O.tT)("@@initialState"),l=g.initialState,r=l||{},e=r.currentUser,f=(0,i.useState)(e==null?void 0:e.deptId),E=(0,d.Z)(f,2),D=E[0],h=E[1],M=(0,i.useState)({id:e==null?void 0:e.deptId,name:e==null?void 0:e.deptName,typeId:e==null?void 0:e.deptTypeId}),A=(0,d.Z)(M,2),C=A[0],U=A[1],B=(0,i.useState)(),K=(0,d.Z)(B,2),S=K[0],w=K[1],q=(0,i.useState)([]),z=(0,d.Z)(q,2),F=z[0],ee=z[1],te=(0,i.useState)([e==null?void 0:e.deptId]),H=(0,d.Z)(te,2),ne=H[0],G=H[1],re=(0,i.useState)(""),J=(0,d.Z)(re,2),R=J[0],ae=J[1],le=(0,i.useState)(!0),Q=(0,d.Z)(le,2),ie=Q[0],X=Q[1];(0,i.useEffect)(function(){oe()},[]);var oe=function(){L.et((0,W.Ui)("/dept/tree")).then(function(n){if(n!=null&&n.data){var u=b(n==null?void 0:n.data);w(u),ue(n==null?void 0:n.data),o.onInit&&o.onInit(u)}})},ue=function Z(n){for(var u=function(v){var I=n[v];ee(function(V){return[].concat((0,T.Z)(V),[{key:I.id,title:I.name}])}),I.children&&Z(I.children)},s=0;s<n.length;s++)u(s)},de=function(n){G(n),X(!1)},se=function(n){var u=n.target.value;if(u){var s=F==null?void 0:F.map(function(c){var v;return((v=String(c==null?void 0:c.title))===null||v===void 0?void 0:v.indexOf(u))>-1?N(c.key,S):null}).filter(function(c,v,I){return c&&I.indexOf(c)===v});G(s.length>0?s:[e==null?void 0:e.deptId]),ae(u),X(!0)}else G([e==null?void 0:e.deptId])},$=(0,i.useMemo)(function(){var Z=function n(u){return u.map(function(s){var c=s.title,v=c.indexOf(R),I=c.substring(0,v),V=c.slice(v+R.length),k=v>-1?(0,a.jsxs)("span",{children:[I,(0,a.jsx)("span",{style:{color:"#f50"},children:R}),V]}):(0,a.jsx)("span",{children:c}),ce=s.key==="0"?(0,a.jsx)(p.Z,{}):(0,a.jsx)(x.Z,{});return s.children?{title:k,icon:ce,key:s.key,children:n(s.children)}:{title:k,key:s.key,icon:(0,a.jsx)(p.Z,{})}})};return S?Z(S):null},[R]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.default,{style:{marginBottom:8},placeholder:"\u90E8\u95E8\u641C\u7D22",onChange:se}),S&&(0,a.jsx)(m.Z,{showIcon:!0,onExpand:de,blockNode:!0,expandedKeys:ne,autoExpandParent:ie,style:{fontSize:"16px"},defaultSelectedKeys:[e==null?void 0:e.deptId],treeData:$||S,selectedKeys:[D],onSelect:function(n,u){n[0]&&(h(n[0]),U({id:u.node.key,name:u.node.title,typeId:u.node.deptTypeId}),o.onSelect(n[0]))}})]})};j.Z=_},16530:function(Y,j,t){"use strict";t.r(j),t.d(j,{default:function(){return r}});var T=t(2824),d=t(67294),i=t(40759),y=t(39428),m=t(3182),p=t(90102),x=t(45254),O=(0,x.Ui)("/logLogin");function W(e,f){return L.apply(this,arguments)}function L(){return L=(0,m.Z)((0,y.Z)().mark(function e(f,E){return(0,y.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.abrupt("return",p.LV(O,f,E));case 1:case"end":return h.stop()}},e)})),L.apply(this,arguments)}var a=t(57895),b=t(78009),N=t(33107),_=t(85893);function P(e){var f=e.children,E=(0,d.useState)(),D=(0,T.Z)(E,2),h=D[0],M=D[1],A=(0,d.useState)(),C=(0,T.Z)(A,2),U=C[0],B=C[1];return(0,_.jsx)(b.ZP,{header:{breadcrumb:{}},children:(0,_.jsxs)(a.ZP,{split:"vertical",ghost:!0,children:[(0,_.jsx)(a.ZP,{style:{height:"calc(100vh - 168px)",background:"white"},colSpan:{xs:12,sm:12,md:10,lg:8,xl:5},children:(0,_.jsx)(N.Z,{onInit:function(S){B(S)},onSelect:function(S){M(S)}})}),(0,_.jsx)(a.ZP,{ghost:!0,children:f({deptId:h,deptTree:U})})]})})}var o=P,g=t(62586),l=function(){var f=(0,d.useState)(""),E=(0,T.Z)(f,2),D=E[0],h=E[1];(0,d.useEffect)(function(){h((0,g.W)())},[]);var M=[{title:"\u767B\u5F55\u7528\u6237",align:"center",dataIndex:"username",sorter:!0},{title:"IP",align:"center",dataIndex:"ip"},{title:"\u767B\u5F55\u5730\u5740",align:"center",dataIndex:"location"},{title:"\u6D4F\u89C8\u5668",align:"center",dataIndex:"browser"},{title:"\u64CD\u4F5C\u7CFB\u7EDF",align:"center",dataIndex:"os"},{title:"\u767B\u5F55\u65F6\u95F4",align:"center",search:!1,sorter:!0,dataIndex:"createTime",valueType:"dateTime"}];return(0,_.jsx)(o,{children:function(C){var U=C.deptId,B=C.deptTree;return(0,_.jsx)(i.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C1",rowKey:"id",search:{labelWidth:120},scroll:{y:D,x:"1000px"},request:W,columns:M})}})},r=l},62586:function(Y,j,t){"use strict";t.d(j,{W:function(){return T}});var T=function(i,y){i||(i=74);var m=null;if(y){var p;m=document.getElementById(y)?(p=document.getElementById(y))===null||p===void 0?void 0:p.getElementsByClassName("ant-table-thead")[0]:null}else m=document.getElementsByClassName("ant-table-thead")[0];var x=0;m&&(x=m.getBoundingClientRect().bottom);var O="calc(100vh - ".concat(x+i+window.scrollY+30,"px)");return O}}}]);
