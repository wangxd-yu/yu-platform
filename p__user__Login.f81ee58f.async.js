(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{5966:function(ie,V,e){"use strict";var A=e(28991),X=e(81253),O=e(85893),U=e(31649),me=["fieldProps","proFieldProps"],Y=["fieldProps","proFieldProps"],f="text",R=function(M){var J=M.fieldProps,b=M.proFieldProps,z=(0,X.Z)(M,me);return(0,O.jsx)(U.Z,(0,A.Z)({valueType:f,fieldProps:J,filedConfig:{valueType:f},proFieldProps:b},z))},$=function(M){var J=M.fieldProps,b=M.proFieldProps,z=(0,X.Z)(M,Y);return(0,O.jsx)(U.Z,(0,A.Z)({valueType:"password",fieldProps:J,proFieldProps:b,filedConfig:{valueType:f}},z))},W=R;W.Password=$,W.displayName="ProFormComponent",V.Z=W},34687:function(ie){ie.exports={container:"container___1sYa-",lang:"lang___l6cji",content:"content___2zk1-",top:"top___1C1Zi",header:"header___5xZ3f",logo:"logo___2hXsy",title:"title___1-xuF",desc:"desc___-njyT",main:"main___x4OjT",icon:"icon___rzGKO",other:"other___lLyaU",register:"register___11Twg",prefixIcon:"prefixIcon___23Xrx"}},3178:function(){},59252:function(ie,V,e){"use strict";e.r(V),e.d(V,{default:function(){return Be}});var A=e(49111),X=e(19650),O=e(18106),U=e(95562),me=e(34792),Y=e(48086),f=e(39428),R=e(11849),$=e(3182),W=e(2824),pe=e(17462),M=e(76772),J=e(54618),b=e(89366),z=e(2603),c=e(80521),Se=e(36108),Fe=e(48107),Ie=e(39464),j=e(67294),Re=e(57663),Ne=e(71577),Ae=e(47673),Oe=e(4107),x=e(28991),te=e(55507),he=e(92137),ge=e(81253),ce=e(28481),Ue=e(9715),Ze=e(55843),r=e(85893),C=e(74115),t=["rules","name","phoneName","fieldProps","captchaTextRender","captchaProps"],i=j.forwardRef(function(o,a){var m=Ze.Z.useFormInstance(),D=(0,j.useState)(o.countDown||60),y=(0,ce.Z)(D,2),G=y[0],L=y[1],ee=(0,j.useState)(!1),oe=(0,ce.Z)(ee,2),F=oe[0],v=oe[1],I=(0,j.useState)(),je=(0,ce.Z)(I,2),Te=je[0],H=je[1],$e=o.rules,We=o.name,ve=o.phoneName,re=o.fieldProps,fe=o.captchaTextRender,B=fe===void 0?function(u,s){return u?"".concat(s," \u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"}:fe,p=o.captchaProps,h=(0,ge.Z)(o,t),g=function(){var u=(0,he.Z)((0,te.Z)().mark(function s(N){return(0,te.Z)().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,H(!0),E.next=4,h.onGetCaptcha(N);case 4:H(!1),v(!0),E.next=13;break;case 8:E.prev=8,E.t0=E.catch(0),v(!1),H(!1),console.log(E.t0);case 13:case"end":return E.stop()}},s,null,[[0,8]])}));return function(N){return u.apply(this,arguments)}}();return(0,j.useImperativeHandle)(a,function(){return{startTiming:function(){return v(!0)},endTiming:function(){return v(!1)}}}),(0,j.useEffect)(function(){var u=0,s=o.countDown;return F&&(u=window.setInterval(function(){L(function(N){return N<=1?(v(!1),clearInterval(u),s||60):N-1})},1e3)),function(){return clearInterval(u)}},[F]),(0,r.jsxs)("div",{style:(0,x.Z)((0,x.Z)({},re==null?void 0:re.style),{},{display:"flex",alignItems:"center"}),ref:a,children:[(0,r.jsx)(Oe.Z,(0,x.Z)((0,x.Z)({},re),{},{style:{flex:1,transition:"width .3s",marginRight:8}})),(0,r.jsx)(Ne.Z,(0,x.Z)((0,x.Z)({style:{display:"block"},disabled:F,loading:Te},p),{},{onClick:function(){var u=(0,he.Z)((0,te.Z)().mark(function N(){var le;return(0,te.Z)().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(P.prev=0,!ve){P.next=9;break}return P.next=4,m.validateFields([ve].flat(1));case 4:return le=m.getFieldValue([ve].flat(1)),P.next=7,g(le);case 7:P.next=11;break;case 9:return P.next=11,g("");case 11:P.next=16;break;case 13:P.prev=13,P.t0=P.catch(0),console.log(P.t0);case 16:case"end":return P.stop()}},N,null,[[0,13]])}));function s(){return u.apply(this,arguments)}return s}(),children:B(F,G)}))]})}),n=(0,C.G)(i),l=n,T=e(63185),S=e(9676),Q=e(22270),k=e(31649),ne=["options","fieldProps","proFieldProps","valueEnum"],w=j.forwardRef(function(o,a){var m=o.options,D=o.fieldProps,y=o.proFieldProps,G=o.valueEnum,L=(0,ge.Z)(o,ne);return(0,r.jsx)(k.Z,(0,x.Z)({ref:a,valueType:"checkbox",valueEnum:(0,Q.h)(G,void 0),fieldProps:(0,x.Z)({options:m},D),lightProps:(0,x.Z)({labelFormatter:function(){return(0,r.jsx)(k.Z,(0,x.Z)({ref:a,valueType:"checkbox",mode:"read",valueEnum:(0,Q.h)(G,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,x.Z)({options:m},D),proFieldProps:y},L))}},L.lightProps),proFieldProps:y},L))}),ue=j.forwardRef(function(o,a){var m=o.fieldProps,D=o.children;return(0,r.jsx)(S.Z,(0,x.Z)((0,x.Z)({ref:a},m),{},{children:D}))}),de=(0,C.G)(ue,{valuePropName:"checked"}),ae=de;ae.Group=w;var xe=ae,Me=e(952),q=e(5966),K=e(50208),De=e(73727),Ce=e(29791),_=e(36571);function Le(o,a){return se.apply(this,arguments)}function se(){return se=(0,$.Z)((0,f.Z)().mark(function o(a,m){return(0,f.Z)().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.abrupt("return",(0,K.WY)("/api/login/captcha",(0,R.Z)({method:"GET",params:(0,R.Z)({},a)},m||{})));case 1:case"end":return y.stop()}},o)})),se.apply(this,arguments)}var ye=e(34687),d=e.n(ye),Pe=function(a){var m=a.content;return(0,r.jsx)(M.Z,{style:{marginBottom:24},message:m,type:"error",showIcon:!0})},Ee=function(){var a=(0,j.useState)(!1),m=(0,W.Z)(a,2),D=m[0],y=m[1],G=(0,j.useState)({}),L=(0,W.Z)(G,2),ee=L[0],oe=L[1],F=(0,j.useState)("account"),v=(0,W.Z)(F,2),I=v[0],je=v[1],Te=(0,K.tT)("@@initialState"),H=Te.initialState,$e=Te.setInitialState,We=function(){var B=(0,$.Z)((0,f.Z)().mark(function p(){var h,g;return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,H==null||(h=H.fetchUserInfo)===null||h===void 0?void 0:h.call(H);case 2:if(g=s.sent,!g){s.next=6;break}return s.next=6,$e(function(N){return(0,R.Z)((0,R.Z)({},N),{},{currentUser:g})});case 6:case"end":return s.stop()}},p)}));return function(){return B.apply(this,arguments)}}(),ve=function(){var B=(0,$.Z)((0,f.Z)().mark(function p(h){var g,u,s,N,le,E;return(0,f.Z)().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return y(!0),Z.prev=1,Z.next=4,(0,_.x4)((0,R.Z)((0,R.Z)({},h),{},{type:I}));case 4:if(g=Z.sent,console.log(g),!g.token){Z.next=18;break}return localStorage.setItem("auth_token",JSON.stringify(g)),u="\u767B\u5F55\u6210\u529F\uFF01",Y.ZP.success(u),Z.next=12,We();case 12:if(K.m8){Z.next=14;break}return Z.abrupt("return");case 14:return s=K.m8.location.query,N=s,le=N.redirect,K.m8.push(le||"/"),Z.abrupt("return");case 18:oe(g),Z.next=26;break;case 21:Z.prev=21,Z.t0=Z.catch(1),console.log(Z.t0),E="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01",Y.ZP.error(E);case 26:y(!1);case 27:case"end":return Z.stop()}},p,null,[[1,21]])}));return function(h){return B.apply(this,arguments)}}(),re=ee.status,fe=ee.type;return(0,r.jsxs)("div",{className:d().container,children:[(0,r.jsxs)("div",{className:d().content,children:[(0,r.jsxs)("div",{className:d().top,children:[(0,r.jsx)("div",{className:d().header,children:(0,r.jsxs)(De.rU,{to:"/",children:[(0,r.jsx)("img",{alt:"logo",className:d().logo,src:"".concat("/yu-platform/","logo.svg")}),(0,r.jsx)("span",{className:d().title,children:"Ant Design"})]})}),(0,r.jsx)("div",{className:d().desc,children:"Ant Design \u662F\u897F\u6E56\u533A\u6700\u5177\u5F71\u54CD\u529B\u7684 Web \u8BBE\u8BA1\u89C4\u8303"})]}),(0,r.jsxs)("div",{className:d().main,children:[(0,r.jsxs)(Me.ZP,{initialValues:{autoLogin:!0},submitter:{searchConfig:{submitText:"\u767B\u5F55"},render:function(p,h){return h.pop()},submitButtonProps:{loading:D,size:"large",style:{width:"100%"}}},onFinish:function(){var B=(0,$.Z)((0,f.Z)().mark(function p(h){return(0,f.Z)().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:ve(h);case 1:case"end":return u.stop()}},p)}));return function(p){return B.apply(this,arguments)}}(),children:[(0,r.jsxs)(U.Z,{activeKey:I,onChange:je,children:[(0,r.jsx)(U.Z.TabPane,{tab:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},"account"),(0,r.jsx)(U.Z.TabPane,{tab:"\u624B\u673A\u53F7\u767B\u5F55"},"mobile")]}),re==="error"&&fe==="account"&&(0,r.jsx)(Pe,{content:"\u9519\u8BEF\u7684\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF08admin/ant.design)"}),I==="account"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.Z,{name:"tenantId",fieldProps:{size:"large",prefix:(0,r.jsx)(J.Z,{className:d().prefixIcon})},placeholder:"\u79DF\u6237\u7F16\u53F7: 1000 or 1001",rules:[{required:!0,message:"\u79DF\u6237\u7F16\u53F7\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,r.jsx)(q.Z,{name:"username",fieldProps:{size:"large",prefix:(0,r.jsx)(b.Z,{className:d().prefixIcon})},placeholder:"\u7528\u6237\u540D: admin or user",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879\uFF01"}]}),(0,r.jsx)(q.Z.Password,{name:"password",fieldProps:{size:"large",prefix:(0,r.jsx)(z.Z,{className:d().prefixIcon})},placeholder:"\u5BC6\u7801: ant.design",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879\uFF01"}]})]}),re==="error"&&fe==="mobile"&&(0,r.jsx)(Pe,{content:"\u9A8C\u8BC1\u7801\u9519\u8BEF"}),I==="mobile"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(q.Z,{fieldProps:{size:"large",prefix:(0,r.jsx)(c.Z,{className:d().prefixIcon})},name:"mobile",placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\uFF01",rules:[{required:!0,message:"\u624B\u673A\u53F7\u662F\u5FC5\u586B\u9879\uFF01"},{pattern:/^1\d{10}$/,message:"\u4E0D\u5408\u6CD5\u7684\u624B\u673A\u53F7\uFF01"}]}),(0,r.jsx)(l,{fieldProps:{size:"large",prefix:(0,r.jsx)(z.Z,{className:d().prefixIcon})},captchaProps:{size:"large"},placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u7801\uFF01",captchaTextRender:function(p,h){return p?"".concat(h," ","\u79D2\u540E\u91CD\u65B0\u83B7\u53D6"):"\u83B7\u53D6\u9A8C\u8BC1\u7801"},name:"captcha",rules:[{required:!0,message:"\u9A8C\u8BC1\u7801\u662F\u5FC5\u586B\u9879\uFF01"}],onGetCaptcha:function(){var B=(0,$.Z)((0,f.Z)().mark(function p(h){var g;return(0,f.Z)().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Le({phone:h});case 2:if(g=s.sent,g!==!1){s.next=5;break}return s.abrupt("return");case 5:Y.ZP.success("\u83B7\u53D6\u9A8C\u8BC1\u7801\u6210\u529F\uFF01\u9A8C\u8BC1\u7801\u4E3A\uFF1A1234");case 6:case"end":return s.stop()}},p)}));return function(p){return B.apply(this,arguments)}}()})]}),(0,r.jsxs)("div",{style:{marginBottom:24},children:[(0,r.jsx)(xe,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},children:"\u5FD8\u8BB0\u5BC6\u7801 ?"})]})]}),(0,r.jsxs)(X.Z,{className:d().other,children:["\u5176\u4ED6\u767B\u5F55\u65B9\u5F0F :",(0,r.jsx)(Se.Z,{className:d().icon}),(0,r.jsx)(Fe.Z,{className:d().icon}),(0,r.jsx)(Ie.Z,{className:d().icon})]})]})]}),(0,r.jsx)(Ce.Z,{})]})},Be=Ee},76772:function(ie,V,e){"use strict";e.d(V,{Z:function(){return r}});var A=e(22122),X=e(28481),O=e(96156),U=e(38819),me=e(15873),Y=e(43061),f=e(73218),R=e(54549),$=e(68855),W=e(57119),pe=e(40847),M=e(68628),J=e(94184),b=e.n(J),z=e(63441),c=e(67294),Se=e(53124),Fe=e(5467),Ie=e(96159),j=e(6610),Re=e(5991),Ne=e(10379),Ae=e(44144),Oe=function(C){(0,Ne.Z)(i,C);var t=(0,Ae.Z)(i);function i(){var n;return(0,j.Z)(this,i),n=t.apply(this,arguments),n.state={error:void 0,info:{componentStack:""}},n}return(0,Re.Z)(i,[{key:"componentDidCatch",value:function(l,T){this.setState({error:l,info:T})}},{key:"render",value:function(){var l=this.props,T=l.message,S=l.description,Q=l.children,k=this.state,ne=k.error,w=k.info,ue=w&&w.componentStack?w.componentStack:null,de=typeof T=="undefined"?(ne||"").toString():T,ae=typeof S=="undefined"?ue:S;return ne?c.createElement(r,{type:"error",message:de,description:c.createElement("pre",null,ae)}):Q}}]),i}(c.Component),x=Oe,te=function(C,t){var i={};for(var n in C)Object.prototype.hasOwnProperty.call(C,n)&&t.indexOf(n)<0&&(i[n]=C[n]);if(C!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,n=Object.getOwnPropertySymbols(C);l<n.length;l++)t.indexOf(n[l])<0&&Object.prototype.propertyIsEnumerable.call(C,n[l])&&(i[n[l]]=C[n[l]]);return i},he={success:U.Z,info:pe.Z,error:Y.Z,warning:$.Z},ge={success:me.Z,info:M.Z,error:f.Z,warning:W.Z},ce=function(t){var i=t.description,n=t.icon,l=t.prefixCls,T=t.type,S=(i?ge:he)[T]||null;return n?(0,Ie.wm)(n,c.createElement("span",{className:"".concat(l,"-icon")},n),function(){return{className:b()("".concat(l,"-icon"),(0,O.Z)({},n.props.className,n.props.className))}}):c.createElement(S,{className:"".concat(l,"-icon")})},Ue=function(t){var i=t.isClosable,n=t.closeText,l=t.prefixCls,T=t.closeIcon,S=t.handleClose;return i?c.createElement("button",{type:"button",onClick:S,className:"".concat(l,"-close-icon"),tabIndex:0},n?c.createElement("span",{className:"".concat(l,"-close-text")},n):T):null},Ze=function(t){var i,n=t.description,l=t.prefixCls,T=t.message,S=t.banner,Q=t.className,k=Q===void 0?"":Q,ne=t.style,w=t.onMouseEnter,ue=t.onMouseLeave,de=t.onClick,ae=t.afterClose,xe=t.showIcon,Me=t.closable,q=t.closeText,K=t.closeIcon,De=K===void 0?c.createElement(R.Z,null):K,Ce=t.action,_=te(t,["description","prefixCls","message","banner","className","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action"]),Le=c.useState(!1),se=(0,X.Z)(Le,2),ye=se[0],d=se[1],Pe=c.useRef(),Ee=c.useContext(Se.E_),Be=Ee.getPrefixCls,o=Ee.direction,a=Be("alert",l),m=function(v){var I;d(!0),(I=_.onClose)===null||I===void 0||I.call(_,v)},D=function(){var v=_.type;return v!==void 0?v:S?"warning":"info"},y=q?!0:Me,G=D(),L=S&&xe===void 0?!0:xe,ee=b()(a,"".concat(a,"-").concat(G),(i={},(0,O.Z)(i,"".concat(a,"-with-description"),!!n),(0,O.Z)(i,"".concat(a,"-no-icon"),!L),(0,O.Z)(i,"".concat(a,"-banner"),!!S),(0,O.Z)(i,"".concat(a,"-rtl"),o==="rtl"),i),k),oe=(0,Fe.Z)(_);return c.createElement(z.default,{visible:!ye,motionName:"".concat(a,"-motion"),motionAppear:!1,motionEnter:!1,onLeaveStart:function(v){return{maxHeight:v.offsetHeight}},onLeaveEnd:ae},function(F){var v=F.className,I=F.style;return c.createElement("div",(0,A.Z)({ref:Pe,"data-show":!ye,className:b()(ee,v),style:(0,A.Z)((0,A.Z)({},ne),I),onMouseEnter:w,onMouseLeave:ue,onClick:de,role:"alert"},oe),L?c.createElement(ce,{description:n,icon:_.icon,prefixCls:a,type:G}):null,c.createElement("div",{className:"".concat(a,"-content")},T?c.createElement("div",{className:"".concat(a,"-message")},T):null,n?c.createElement("div",{className:"".concat(a,"-description")},n):null),Ce?c.createElement("div",{className:"".concat(a,"-action")},Ce):null,c.createElement(Ue,{isClosable:!!y,closeText:q,prefixCls:a,closeIcon:De,handleClose:m}))})};Ze.ErrorBoundary=x;var r=Ze},17462:function(ie,V,e){"use strict";var A=e(38663),X=e.n(A),O=e(3178),U=e.n(O)}}]);
