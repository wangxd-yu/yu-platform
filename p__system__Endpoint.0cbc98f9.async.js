(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[592],{71550:function(ie,H,n){"use strict";n.d(H,{Z:function(){return v}});var d=n(11849),I=n(93224),W=n(67294),Z=n(952),w=n(37476),t=n(71975),m=n(2824),q=n(61193),K=n.n(q),U=n(85893),ee=["title","modalProps","children"],y=function(e){var g=(0,W.useState)(!1),i=(0,m.Z)(g,2),B=i[0],k=i[1],z=(0,W.useState)(),J=(0,m.Z)(z,2),L=J[0],N=J[1],j=W.createRef(),ae=e.title,ne=e.modalProps,ue=e.children,Q=(0,I.Z)(e,ee),le=function(re,S){var V,O=window.document.documentElement,X=O.clientWidth,te=O.clientHeight,Y=j==null||(V=j.current)===null||V===void 0?void 0:V.getBoundingClientRect();!Y||N({left:-Y.left+S.x,right:X-(Y.right-S.x),top:-Y.top+S.y,bottom:te-(Y.bottom-S.y)})};return(0,U.jsx)(w.Y,(0,d.Z)((0,d.Z)({title:(0,U.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOver:function(){B&&k(!1)},onMouseOut:function(){k(!0)},onFocus:function(){},onBlur:function(){},children:ae})},Q),{},{modalProps:{modalRender:function(re){return(0,U.jsx)(K(),{disabled:B,bounds:L,onStart:function(V,O){return le(V,O)},children:(0,U.jsxs)("div",{ref:j,children:[" ",re," "]})})}},children:ue}))},l=y,f=["formType","isAdd","children","title"],p=function(e){var g={ProForm:Z.ZP,YuDraggleModal:l,ModalForm:w.Y,DrawerForm:t.a},i=e==null?void 0:e.layout;i=i||"horizontal";var B=i==="horizontal"?{labelCol:{span:5},wrapperCol:{span:19}}:{},k=e!=null&&e.formType?g[e==null?void 0:e.formType]:g.YuDraggleModal,z=e.formType,J=e.isAdd,L=e.children,N=e.title,j=(0,I.Z)(e,f);return(0,U.jsx)(k,(0,d.Z)((0,d.Z)((0,d.Z)({title:N,layout:i},B),j),{},{children:L}))},v=p},98435:function(ie,H,n){"use strict";n.r(H),n.d(H,{default:function(){return ge},methodMap:function(){return se}});var d=n(11849),I=n(57663),W=n(71577),Z=n(62350),w=n(24565),t=n(39428),m=n(3182),q=n(77576),K=n(12028),U=n(71153),ee=n(60331),y=n(2824),l=n(67294),f=n(49101),p=n(78009),v=n(40759),c=n(90102),e=n(45254),g=(0,e.Ui)("/endpoint");function i(a,s){return B.apply(this,arguments)}function B(){return B=(0,m.Z)((0,t.Z)().mark(function a(s,E){return(0,t.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",c.LV("".concat(g),s,E));case 1:case"end":return o.stop()}},a)})),B.apply(this,arguments)}function k(a,s){return z.apply(this,arguments)}function z(){return z=(0,m.Z)((0,t.Z)().mark(function a(s,E){return(0,t.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",c.FO(s,g).then(function(_){return E(_)}));case 1:case"end":return o.stop()}},a)})),z.apply(this,arguments)}function J(a){return L.apply(this,arguments)}function L(){return L=(0,m.Z)((0,t.Z)().mark(function a(s){return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c.Vx(g,s));case 1:case"end":return r.stop()}},a)})),L.apply(this,arguments)}function N(a){return j.apply(this,arguments)}function j(){return j=(0,m.Z)((0,t.Z)().mark(function a(s){return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c.IH(s,g));case 1:case"end":return r.stop()}},a)})),j.apply(this,arguments)}function ae(a){return ne.apply(this,arguments)}function ne(){return ne=(0,m.Z)((0,t.Z)().mark(function a(s){return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c.Jp(s,g));case 1:case"end":return r.stop()}},a)})),ne.apply(this,arguments)}function ue(a){return Q.apply(this,arguments)}function Q(){return Q=(0,m.Z)((0,t.Z)().mark(function a(s){return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c.Vx("".concat(g,"/").concat(s,":accessEnable")));case 1:case"end":return r.stop()}},a)})),Q.apply(this,arguments)}function le(a){return R.apply(this,arguments)}function R(){return R=(0,m.Z)((0,t.Z)().mark(function a(s){return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c.Vx("".concat(g,"/").concat(s,":accessDisable")));case 1:case"end":return r.stop()}},a)})),R.apply(this,arguments)}function re(a){return S.apply(this,arguments)}function S(){return S=(0,m.Z)((0,t.Z)().mark(function a(s){return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c.Vx("".concat(g,"/").concat(s,":logEnable")));case 1:case"end":return r.stop()}},a)})),S.apply(this,arguments)}function V(a){return O.apply(this,arguments)}function O(){return O=(0,m.Z)((0,t.Z)().mark(function a(s){return(0,t.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",c.Vx("".concat(g,"/").concat(s,":logDisable")));case 1:case"end":return r.stop()}},a)})),O.apply(this,arguments)}var X=n(75159),te=n(52688),Y=n(5966),oe=n(64317),ce=n(97462),de=n(71550),fe=n(96486),pe=n.n(fe),h=n(85893),ve=function(s){var E=(0,l.useState)(new Map),r=(0,y.Z)(E,2),o=r[0],_=r[1];return(0,l.useEffect)(function(){c.U2((0,e.Ui)("/endpoint/all")).then(function($){_(new Map(Object.entries(pe().groupBy($,"pattern"))))})},[]),(0,h.jsxs)(de.Z,(0,d.Z)((0,d.Z)({},s),{},{children:[(0,h.jsx)(te.Z,{name:"accessEnabled",label:"\u6743\u9650\u72B6\u6001"}),(0,h.jsx)(te.Z,{name:"logEnabled",label:"\u65E5\u5FD7\u72B6\u6001"}),(0,h.jsx)(Y.Z,{rules:[{required:!0,message:"\u7AEF\u70B9\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u7AEF\u70B9\u540D\u79F0",name:"label"}),(0,h.jsx)(oe.Z,{name:"pattern",label:"\u7AEF\u70B9\u8DEF\u5F84",showSearch:!0,options:Array.from(o==null?void 0:o.keys()).map(function($){return{value:$,label:$}}),placeholder:"\u8BF7\u9009\u62E9",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7AEF\u70B9\u8DEF\u5F84"}],fieldProps:{onChange:function(){var P,T;(P=s.formRef)===null||P===void 0||(T=P.current)===null||T===void 0||T.setFieldsValue({method:""})}}}),(0,h.jsx)(ce.Z,{name:["pattern"],children:function(P){var T,F=P.pattern;return(0,h.jsx)(oe.Z,{name:"method",label:"\u8BF7\u6C42\u65B9\u6CD5",options:o==null||(T=o.get(F))===null||T===void 0?void 0:T.map(function(D){return{value:D.method,label:D.method}}),fieldProps:{defaultValue:""},placeholder:"\u8BF7\u9009\u62E9",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"}]})}})]}))},he=ve,se={POST:{color:"blue",text:"POST"},PUT:{color:"green",text:"PUT"},GET:{color:"volcano",text:"GET"},DELETE:{color:"red",text:"DELETE"}},me=function(){var s=(0,l.useState)(!1),E=(0,y.Z)(s,2),r=E[0],o=E[1],_=(0,l.useState)(),$=(0,y.Z)(_,2),P=$[0],T=$[1],F=(0,l.useRef)(),D=(0,l.useRef)(),Ze=[{title:"\u7AEF\u70B9\u540D\u79F0",dataIndex:"label",sorter:!0},{title:"\u7AEF\u70B9\u8DEF\u5F84",dataIndex:"pattern",sorter:!0},{title:"\u8BF7\u6C42\u65B9\u6CD5",align:"center",dataIndex:"method",valueType:"select",valueEnum:{POST:{text:"POST"},PUT:{text:"PUT"},GET:{text:"GET"},DELETE:{text:"DELETE"}},render:function(M,u){return(0,h.jsx)(ee.Z,{color:se[u.method].color,children:se[u.method].text})}},{title:"\u6743\u9650",align:"center",dataIndex:"accessEnabled",valueType:"select",valueEnum:{true:{text:"\u542F\u7528"},false:{text:"\u505C\u7528"}},render:function(M,u){return[(0,h.jsx)(K.Z,{checked:u.accessEnabled,checkedChildren:"\u542F\u7528",unCheckedChildren:"\u505C\u7528",onChange:function(){var b;u.accessEnabled?le(u.id):ue(u.id),(b=D.current)===null||b===void 0||b.reload()}},"accessEnabled")]}},{title:"\u65E5\u5FD7",align:"center",dataIndex:"logEnabled",valueType:"select",valueEnum:{true:{text:"\u542F\u7528"},false:{text:"\u505C\u7528"}},render:function(M,u){return[(0,h.jsx)(K.Z,{checked:u.logEnabled,checkedChildren:"\u542F\u7528",unCheckedChildren:"\u505C\u7528",onChange:function(){var b;u.logEnabled?V(u.id):re(u.id),(b=D.current)===null||b===void 0||b.reload()}},"logEnabled")]}},{title:"\u521B\u5EFA\u65F6\u95F4",align:"center",search:!1,sorter:!0,dataIndex:"createTime",valueType:"dateTime"},{title:"\u64CD\u4F5C",align:"center",dataIndex:"option",valueType:"option",render:function(M,u){return[(0,h.jsx)("a",{onClick:(0,m.Z)((0,t.Z)().mark(function C(){return(0,t.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,k(u.id,T);case 2:o(!0);case 3:case"end":return x.stop()}},C)})),children:"\u7F16\u8F91"},"update"),(0,h.jsx)(w.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u8BB0\u5F55\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:(0,m.Z)((0,t.Z)().mark(function C(){return(0,t.Z)().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,X.fn(ae,u.id);case 2:D.current&&D.current.reload();case 3:case"end":return x.stop()}},C)})),children:(0,h.jsx)("a",{href:"#",children:"\u5220\u9664"},"delete")},"popconfirm")]}}];return(0,h.jsxs)(p.ZP,{header:{breadcrumb:{}},children:[(0,h.jsx)(v.ZP,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:D,rowKey:"id",search:{labelWidth:120},toolBarRender:function(){return[(0,h.jsxs)(W.Z,{type:"primary",onClick:function(){var u;F==null||(u=F.current)===null||u===void 0||u.resetFields(),T(void 0),o(!0)},children:[(0,h.jsx)(f.Z,{})," \u65B0\u5EFA"]},"primary")]},request:i,columns:Ze}),(0,h.jsx)(he,{width:"500px",title:P!=null&&P.id?"\u66F4\u65B0\u7AEF\u70B9":"\u65B0\u5EFA\u7AEF\u70B9",visible:r,onVisibleChange:function(M){if(M){var u;F==null||(u=F.current)===null||u===void 0||u.resetFields()}else o(!1),T(void 0)},formRef:F,initialValues:P||{accessEnabled:!0,logEnabled:!1},onFinish:function(){var G=(0,m.Z)((0,t.Z)().mark(function M(u){var C,b,x;return(0,t.Z)().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(C=(0,d.Z)((0,d.Z)({},P),u),C.id){A.next=7;break}return A.next=4,X.ii(C,N);case 4:b=A.sent,A.next=10;break;case 7:return A.next=9,X.He(C,J);case 9:b=A.sent;case 10:b&&(o(!1),F==null||(x=F.current)===null||x===void 0||x.resetFields(),D.current&&D.current.reload());case 11:case"end":return A.stop()}},M)}));return function(M){return G.apply(this,arguments)}}()})]})},ge=me},75159:function(ie,H,n){"use strict";n.d(H,{pr:function(){return t},ii:function(){return m},He:function(){return q},fn:function(){return K}});var d=n(39428),I=n(11849),W=n(34792),Z=n(48086),w=n(3182),t=function(){var y=(0,w.Z)((0,d.Z)().mark(function l(f,p){var v,c,e=arguments;return(0,d.Z)().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return v=e.length>2&&e[2]!==void 0?e[2]:"\u5904\u7406",c=Z.ZP.loading("\u6B63\u5728".concat(v)),i.prev=2,c(),i.next=6,p((0,I.Z)({},f));case 6:return Z.ZP.success("".concat(v,"\u6210\u529F")),i.abrupt("return",!0);case 10:return i.prev=10,i.t0=i.catch(2),Z.ZP.error("".concat(v,"\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01")),i.abrupt("return",!1);case 14:case"end":return i.stop()}},l,null,[[2,10]])}));return function(f,p){return y.apply(this,arguments)}}(),m=function(){var y=(0,w.Z)((0,d.Z)().mark(function l(f,p){var v;return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v=Z.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,v(),e.next=5,p((0,I.Z)({},f));case 5:return Z.ZP.success("\u6DFB\u52A0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),Z.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 13:case"end":return e.stop()}},l,null,[[1,9]])}));return function(f,p){return y.apply(this,arguments)}}(),q=function(){var y=(0,w.Z)((0,d.Z)().mark(function l(f,p){var v;return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v=Z.ZP.loading("\u6B63\u5728\u66F4\u65B0"),e.prev=1,v(),e.next=5,p((0,I.Z)({},f));case 5:return Z.ZP.success("\u66F4\u65B0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),Z.ZP.error("\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 13:case"end":return e.stop()}},l,null,[[1,9]])}));return function(f,p){return y.apply(this,arguments)}}(),K=function(){var y=(0,w.Z)((0,d.Z)().mark(function l(f,p){var v;return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(v=Z.ZP.loading("\u6B63\u5728\u5220\u9664"),p){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,v(),e.next=7,f(p);case 7:return Z.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),Z.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},l,null,[[3,11]])}));return function(f,p){return y.apply(this,arguments)}}(),U=null,ee=null}}]);
