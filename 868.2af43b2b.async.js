(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[868],{71550:function(G,F,r){"use strict";r.d(F,{Z:function(){return _}});var a=r(11849),m=r(93224),y=r(67294),c=r(952),f=r(37476),L=r(71975),M=r(2824),K=r(61193),p=r.n(K),D=r(85893),R=["title","modalProps","children"],E=function(e){var Z=(0,y.useState)(!1),t=(0,M.Z)(Z,2),i=t[0],P=t[1],n=(0,y.useState)(),O=(0,M.Z)(n,2),B=O[0],d=O[1],T=y.createRef(),V=e.title,z=e.modalProps,Y=e.children,C=(0,m.Z)(e,R),o=function(S,W){var I,w=window.document.documentElement,H=w.clientWidth,$=w.clientHeight,x=T==null||(I=T.current)===null||I===void 0?void 0:I.getBoundingClientRect();!x||d({left:-x.left+W.x,right:H-(x.right-W.x),top:-x.top+W.y,bottom:$-(x.bottom-W.y)})};return(0,D.jsx)(f.Y,(0,a.Z)((0,a.Z)({title:(0,D.jsx)("div",{style:{width:"100%",cursor:"move"},onMouseOver:function(){i&&P(!1)},onMouseOut:function(){P(!0)},onFocus:function(){},onBlur:function(){},children:V})},C),{},{modalProps:{modalRender:function(S){return(0,D.jsx)(p(),{disabled:i,bounds:B,onStart:function(I,w){return o(I,w)},children:(0,D.jsxs)("div",{ref:T,children:[" ",S," "]})})}},children:Y}))},s=E,u=["formType","isAdd","children","title"],l=function(e){var Z={ProForm:c.ZP,YuDraggleModal:s,ModalForm:f.Y,DrawerForm:L.a},t=e==null?void 0:e.layout;t=t||"horizontal";var i=t==="horizontal"?{labelCol:{span:5},wrapperCol:{span:19}}:{},P=e!=null&&e.formType?Z[e==null?void 0:e.formType]:Z.YuDraggleModal,n=e.formType,O=e.isAdd,B=e.children,d=e.title,T=(0,m.Z)(e,u);return(0,D.jsx)(P,(0,a.Z)((0,a.Z)((0,a.Z)({title:d,layout:t},i),T),{},{children:B}))},_=l},49868:function(G,F,r){"use strict";var a=r(58996),m=r(77933),y=r(62999),c=r(54680),f=r(43185),L=r(93349),M=r(39428),K=r(3182),p=r(11849),D=r(2824),R=r(93224),E=r(34792),s=r(48086),u=r(67294),l=r(5966),_=r(952),g=r(71550),e=r(45254),Z=r(75159),t=r(90102),i=r(7789),P=r(7085),n=r(49101),O=r(17738),B=r(72338),d=r(85893),T=["deptTree","onFinish"];function V(C,o){var v=new FileReader;v.addEventListener("load",function(){return o(v.result)}),v.readAsDataURL(C)}function z(C){var o=C.type==="image/jpeg"||C.type==="image/png";o||s.ZP.error("You can only upload JPG/PNG file!");var v=C.size/1024/1024<2;return v||s.ZP.error("Image must smaller than 2MB!"),o&&v}var Y=function(o){var v,S,W=o.deptTree,I=o.onFinish,w=(0,R.Z)(o,T),H=(0,u.useState)(!1),$=(0,D.Z)(H,2),x=$[0],J=$[1],re=(0,u.useState)((v=o.initialValues)!==null&&v!==void 0&&v.portraitUrl?"/".concat("/api","/")+((S=o.initialValues)===null||S===void 0?void 0:S.portraitUrl):null),Q=(0,D.Z)(re,2),X=Q[0],te=Q[1],ne=(0,u.useState)([]),k=(0,D.Z)(ne,2),ae=k[0],ue=k[1],se=(0,u.useState)(),q=(0,D.Z)(se,2),le=q[0],ee=q[1];(0,u.useEffect)(function(){var U,h;console.log(o==null||(U=o.initialValues)===null||U===void 0?void 0:U.roleIds),ee(o==null||(h=o.initialValues)===null||h===void 0?void 0:h.roleIds),t.et((0,e.Ui)("/role")).then(function(j){return ue(j==null?void 0:j.data)})},[]);var _e=(0,d.jsxs)("div",{children:[x?(0,d.jsx)(P.Z,{}):(0,d.jsx)(n.Z,{}),(0,d.jsx)("div",{style:{marginTop:8},children:"\u70B9\u51FB\u4E0A\u4F20\u5934\u50CF"})]}),ie=function(h){if(h.file.status==="uploading"){J(!0);return}h.file.status==="done"&&V(h.file.originFileObj,function(j){var A;te(j),(A=o.formRef.current)===null||A===void 0||A.setFieldsValue((0,p.Z)((0,p.Z)({},o.formRef.current.getFieldsValue()),{},{portraitBase64:j.replace(/^data:image\/\w+;base64,/,"")})),J(!1)})},oe=function(h){ee(h)},de={labelCol:{span:2},wrapperCol:{span:22}};return(0,d.jsxs)(g.Z,(0,p.Z)((0,p.Z)((0,p.Z)({formType:"DrawerForm"},de),{},{onFinish:function(){var U=(0,K.Z)((0,M.Z)().mark(function h(j){var A,N;return(0,M.Z)().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(A=(0,p.Z)((0,p.Z)({},o.initialValues),j),A.id){b.next=7;break}return b.next=4,Z.ii(A,B.cn);case 4:N=b.sent,b.next=10;break;case 7:return b.next=9,Z.He(A,B.Nq);case 9:N=b.sent;case 10:N&&I&&I(j);case 11:case"end":return b.stop()}},h)}));return function(h){return U.apply(this,arguments)}}()},w),{},{children:[(0,d.jsx)(O.default,{name:"portraitBase64",wrapperCol:{span:24},children:(0,d.jsx)(i.Z,{rotate:!0,shape:"round",children:(0,d.jsx)(L.Z,{name:"avatar",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,beforeUpload:z,onChange:ie,children:X?(0,d.jsx)("img",{src:X,className:"avatar-uploader",alt:"avatar"}):_e})})}),(0,d.jsx)(l.Z,{rules:[{required:!0,message:"\u8D26\u53F7\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u8D26\u53F7",name:"username"}),(0,d.jsx)(l.Z,{rules:[{required:!0,message:"\u6635\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u6635\u79F0",name:"name"}),(0,d.jsx)(_.ZP.Item,{label:"\u90E8\u95E8",name:"deptId",rules:[{required:!0,message:"\u90E8\u95E8\u4E3A\u5FC5\u9009\u9879"}],children:(0,d.jsx)(c.Z,{style:{width:"100%"},listHeight:300,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:W,placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0})}),(0,d.jsx)(_.ZP.Item,{label:"\u89D2\u8272",name:"roleIds",children:(0,d.jsx)(m.Z,{dataSource:ae,rowKey:function(h){return h.id},titles:["\u5168\u90E8\u89D2\u8272","\u5F53\u524D\u89D2\u8272"],render:function(h){return h.name},targetKeys:le,onChange:oe,oneWay:!0,listStyle:{width:300,height:300}})})]}))};F.Z=Y},72338:function(G,F,r){"use strict";r.d(F,{tM:function(){return L},PR:function(){return K},Nq:function(){return D},cn:function(){return E},h8:function(){return u},Dx:function(){return _},B9:function(){return e}});var a=r(39428),m=r(3182),y=r(90102),c=r(45254),f=(0,c.Ui)("/user");function L(t){return M.apply(this,arguments)}function M(){return M=(0,m.Z)((0,a.Z)().mark(function t(i){return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.LV(f,i));case 1:case"end":return n.stop()}},t)})),M.apply(this,arguments)}function K(t,i){return p.apply(this,arguments)}function p(){return p=(0,m.Z)((0,a.Z)().mark(function t(i,P){return(0,a.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return O.abrupt("return",y.FO(i,f).then(function(B){return P(B)}));case 1:case"end":return O.stop()}},t)})),p.apply(this,arguments)}function D(t){return R.apply(this,arguments)}function R(){return R=(0,m.Z)((0,a.Z)().mark(function t(i){return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.Vx(f,i));case 1:case"end":return n.stop()}},t)})),R.apply(this,arguments)}function E(t){return s.apply(this,arguments)}function s(){return s=(0,m.Z)((0,a.Z)().mark(function t(i){return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.IH(i,f));case 1:case"end":return n.stop()}},t)})),s.apply(this,arguments)}function u(t){return l.apply(this,arguments)}function l(){return l=(0,m.Z)((0,a.Z)().mark(function t(i){return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.Jp(i,f));case 1:case"end":return n.stop()}},t)})),l.apply(this,arguments)}function _(t){return g.apply(this,arguments)}function g(){return g=(0,m.Z)((0,a.Z)().mark(function t(i){return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.Vx("".concat(f,"/").concat(i,"/enable")));case 1:case"end":return n.stop()}},t)})),g.apply(this,arguments)}function e(t){return Z.apply(this,arguments)}function Z(){return Z=(0,m.Z)((0,a.Z)().mark(function t(i){return(0,a.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",y.Vx("".concat(f,"/").concat(i,"/disable")));case 1:case"end":return n.stop()}},t)})),Z.apply(this,arguments)}},75159:function(G,F,r){"use strict";r.d(F,{pr:function(){return L},ii:function(){return M},He:function(){return K},fn:function(){return p}});var a=r(39428),m=r(11849),y=r(34792),c=r(48086),f=r(3182),L=function(){var E=(0,f.Z)((0,a.Z)().mark(function s(u,l){var _,g,e=arguments;return(0,a.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _=e.length>2&&e[2]!==void 0?e[2]:"\u5904\u7406",g=c.ZP.loading("\u6B63\u5728".concat(_)),t.prev=2,g(),t.next=6,l((0,m.Z)({},u));case 6:return c.ZP.success("".concat(_,"\u6210\u529F")),t.abrupt("return",!0);case 10:return t.prev=10,t.t0=t.catch(2),c.ZP.error("".concat(_,"\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01")),t.abrupt("return",!1);case 14:case"end":return t.stop()}},s,null,[[2,10]])}));return function(u,l){return E.apply(this,arguments)}}(),M=function(){var E=(0,f.Z)((0,a.Z)().mark(function s(u,l){var _;return(0,a.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _=c.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,_(),e.next=5,l((0,m.Z)({},u));case 5:return c.ZP.success("\u6DFB\u52A0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),c.ZP.error("\u6DFB\u52A0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 13:case"end":return e.stop()}},s,null,[[1,9]])}));return function(u,l){return E.apply(this,arguments)}}(),K=function(){var E=(0,f.Z)((0,a.Z)().mark(function s(u,l){var _;return(0,a.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _=c.ZP.loading("\u6B63\u5728\u66F4\u65B0"),e.prev=1,_(),e.next=5,l((0,m.Z)({},u));case 5:return c.ZP.success("\u66F4\u65B0\u6210\u529F"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),c.ZP.error("\u66F4\u65B0\u5931\u8D25\u8BF7\u91CD\u8BD5\uFF01"),e.abrupt("return",!1);case 13:case"end":return e.stop()}},s,null,[[1,9]])}));return function(u,l){return E.apply(this,arguments)}}(),p=function(){var E=(0,f.Z)((0,a.Z)().mark(function s(u,l){var _;return(0,a.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_=c.ZP.loading("\u6B63\u5728\u5220\u9664"),l){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,_(),e.next=7,u(l);case 7:return c.ZP.success("\u5220\u9664\u6210\u529F\uFF0C\u5373\u5C06\u5237\u65B0"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),c.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},s,null,[[3,11]])}));return function(u,l){return E.apply(this,arguments)}}(),D=null,R=null}}]);
