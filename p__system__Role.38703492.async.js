(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[905,479],{31199:function(pe,k,e){"use strict";var R=e(28991),T=e(81253),P=e(85893),ee=e(67294),I=e(31649),L=["fieldProps","min","proFieldProps","max"],z=function(i,U){var b=i.fieldProps,ue=i.min,J=i.proFieldProps,A=i.max,M=(0,T.Z)(i,L);return(0,P.jsx)(I.Z,(0,R.Z)({valueType:"digit",fieldProps:(0,R.Z)({min:ue,max:A},b),ref:U,filedConfig:{defaultProps:{width:"100%"}},proFieldProps:J},M))};k.Z=ee.forwardRef(z)},86615:function(pe,k,e){"use strict";var R=e(88983),T=e(47933),P=e(28991),ee=e(81253),I=e(85893),L=e(22270),z=e(67294),u=e(74115),i=e(31649),U=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],b=z.forwardRef(function(M,W){var D=M.fieldProps,re=M.options,ie=M.radioType,le=M.layout,X=M.proFieldProps,h=M.valueEnum,ce=(0,ee.Z)(M,U);return(0,I.jsx)(i.Z,(0,P.Z)((0,P.Z)({valueType:ie==="button"?"radioButton":"radio",ref:W,valueEnum:(0,L.h)(h,void 0)},ce),{},{fieldProps:(0,P.Z)({options:re,layout:le},D),proFieldProps:X,filedConfig:{customLightMode:!0}}))}),ue=z.forwardRef(function(M,W){var D=M.fieldProps,re=M.children;return(0,I.jsx)(T.ZP,(0,P.Z)((0,P.Z)({},D),{},{ref:W,children:re}))}),J=(0,u.G)(ue,{valuePropName:"checked",ignoreWidth:!0}),A=J;A.Group=b,A.Button=T.ZP.Button,A.displayName="ProFormComponent",k.Z=A},90672:function(pe,k,e){"use strict";var R=e(28991),T=e(81253),P=e(85893),ee=e(67294),I=e(31649),L=["fieldProps","proFieldProps"],z=function(i,U){var b=i.fieldProps,ue=i.proFieldProps,J=(0,T.Z)(i,L);return(0,P.jsx)(I.Z,(0,R.Z)({ref:U,valueType:"textarea",fieldProps:b,proFieldProps:ue},J))};k.Z=ee.forwardRef(z)},66988:function(pe){pe.exports={"role-row-select-active":"role-row-select-active___3dcGD"}},88456:function(pe,k,e){"use strict";e.r(k),e.d(k,{MenuTypeEnum:function(){return l},default:function(){return Te},menuTypeArr:function(){return he},menuTypeMap:function(){return Se}});var R=e(71194),T=e(50146),P=e(57338),ee=e(83107),I=e(11849),L=e(57663),z=e(71577),u=e(62350),i=e(24565),U=e(39428),b=e(3182),ue=e(49111),J=e(19650),A=e(71153),M=e(60331),W=e(2824),D=e(67294),re=e(49101),ie=e(78009),le=e(40759),X=e(75159),h=e(85833),ce=e(62999),Pe=e(54680),se=e(952),s=e(71975),m=e(86615),B=e(5966),r=e(31199),$=e(52688),a=e(85893),Fe={labelCol:{span:5},wrapperCol:{span:19}},He=function(x){var ge=(0,D.useState)(l.FOLDER),ve=(0,W.Z)(ge,2),C=ve[0],Ze=ve[1],Ee=function(O){switch(C){case l.FOLDER:return!1;case l.MENU:return!1;case l.PERMISSION:return O!==l.MENU;default:return!1}},p=function oe(O){var V=[];return Array.isArray(O)&&(O==null||O.forEach(function(w){var N={};N.key=w.id,N.value=w.id,N.title=w.name,N.disabled=Ee(l[w.type]),N.children=w.children?oe(w.children):[],!(C===l.FOLDER&&l[w.type]!==l.FOLDER)&&(C!==l.FOLDER&&C===l[w.type]||V.push(N))})),V},t=function(O){return[{key:0,value:"0",title:"\u9876\u7EA7\u76EE\u5F55",disabled:Ee(l.FOLDER),children:p(O)}]};return(0,a.jsxs)(s.a,(0,I.Z)((0,I.Z)({title:x.isAdd?"\u65B0\u5EFA\u83DC\u5355":"\u66F4\u65B0\u83DC\u5355",width:"600px",formRef:x.formRef},Fe),{},{visible:x.visible,layout:"horizontal",onVisibleChange:function(O){if(x.onVisibleChange&&x.onVisibleChange(O),O){var V,w=l[x==null||(V=x.initialValues)===null||V===void 0?void 0:V.type];Ze(w||l.FOLDER)}},onFinish:x.onFinish,initialValues:x.initialValues,children:[(0,a.jsx)(m.Z.Group,{label:"\u83DC\u5355\u7C7B\u578B",radioType:"button",disabled:!x.isAdd,fieldProps:{value:C,buttonStyle:"solid",onChange:function(O){var V;Ze(O.target.value),(V=x.formRef.current)===null||V===void 0||V.setFieldsValue((0,I.Z)((0,I.Z)({},x.formRef.current.getFieldsValue()),{},{pid:void 0}))}},options:he,name:"type"}),(0,a.jsx)(B.Z,{rules:[{required:!0,message:"\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u540D\u79F0",name:"name"}),(0,a.jsx)(se.ZP.Item,{label:"\u4E0A\u7EA7",name:"pid",rules:[{required:!0,message:"\u4E0A\u7EA7\u4E3A\u5FC5\u9009\u9879"}],children:(0,a.jsx)(Pe.Z,{style:{width:"100%"},listHeight:300,dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:t(x.menuDataList),placeholder:"\u8BF7\u9009\u62E9",treeDefaultExpandAll:!0})}),(0,a.jsx)(r.Z,{rules:[{required:!0,message:"\u6392\u5E8F\u4E3A\u5FC5\u586B\u9879"}],label:"\u6392\u5E8F",name:"sort",min:1,max:99}),(C===l.FOLDER||C===l.MENU)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(B.Z,{label:"\u56FE\u6807",name:"icon"}),(0,a.jsx)($.Z,{name:"switch",label:"\u662F\u5426\u9690\u85CF"}),(0,a.jsx)(B.Z,{rules:[{required:!0,message:"\u8DEF\u7531\u8DEF\u5F84\u4E3A\u5FC5\u586B\u9879"}],label:"\u8DEF\u7531\u8DEF\u5F84",name:"path"})]}),C===l.MENU&&(0,a.jsx)(B.Z,{rules:[{required:!0,message:"\u7EC4\u4EF6\u8DEF\u5F84\u4E3A\u5FC5\u586B\u9879"}],label:"\u7EC4\u4EF6\u8DEF\u5F84",name:"component"}),C===l.PERMISSION&&(0,a.jsx)(B.Z,{rules:[{required:!0,message:"\u6743\u9650\u7F16\u7801\u4E3A\u5FC5\u586B\u9879"}],label:"\u6743\u9650\u7F16\u7801",name:"permission"})]}))},Me=He,De=e(98435),Ce=e(96486),Oe=e.n(Ce),l;(function(fe){fe.FOLDER="FOLDER",fe.MENU="MENU",fe.PERMISSION="PERMISSION"})(l||(l={}));var Se=new Map([[l.FOLDER,{label:"\u76EE\u5F55",value:l.FOLDER,color:"success"}],[l.MENU,{label:"\u83DC\u5355",value:l.MENU,color:"processing"}],[l.PERMISSION,{label:"\u6743\u9650",value:l.PERMISSION,color:"warning"}]]),he=Array.from(Se.values()),$e=function(){var x=(0,D.useState)(!1),ge=(0,W.Z)(x,2),ve=ge[0],C=ge[1],Ze=(0,D.useState)(),Ee=(0,W.Z)(Ze,2),p=Ee[0],t=Ee[1],oe=(0,D.useState)(),O=(0,W.Z)(oe,2),V=O[0],w=O[1],N=(0,D.useState)(!1),Ae=(0,W.Z)(N,2),Be=Ae[0],we=Ae[1],Ve=(0,D.useState)([]),Le=(0,W.Z)(Ve,2),f=Le[0],v=Le[1],G=(0,D.useState)(!1),n=(0,W.Z)(G,2),H=n[0],xe=n[1],Q=(0,D.useRef)(),ye=(0,D.useRef)(),me=(0,D.useRef)(),q=(0,D.useState)(),Re=(0,W.Z)(q,2),Ue=Re[0],ne=Re[1],Ne=[{title:"\u83DC\u5355\u540D\u79F0",width:180,dataIndex:"name"},{title:"\u7C7B\u578B",width:60,align:"center",dataIndex:"type",render:function(Z,E){var o=he.find(function(te){return te.value===E.type});return(0,a.jsx)(J.Z,{children:(0,a.jsx)(M.Z,{color:o==null?void 0:o.color,children:o==null?void 0:o.label},o==null?void 0:o.label)})}},{title:"\u56FE\u6807",width:30,align:"center",dataIndex:"icon"},{title:"\u6392\u5E8F",width:40,dataIndex:"sort",align:"right"},{title:"\u8DEF\u7531\u8DEF\u5F84",width:160,dataIndex:"path"},{title:"\u7EC4\u4EF6\u8DEF\u5F84",width:160,dataIndex:"component"},{title:"\u6743\u9650\u7F16\u7801",width:120,dataIndex:"permission"},{title:"\u521B\u5EFA\u65F6\u95F4",width:140,align:"center",dataIndex:"createTime"},{title:"\u64CD\u4F5C",width:180,align:"center",key:"option",valueType:"option",render:function(Z,E){return[(0,a.jsx)("a",{onClick:function(){C(!0),t(E)},children:"\u7F16\u8F91"},"update"),(0,a.jsx)("a",{onClick:(0,b.Z)((0,U.Z)().mark(function o(){return(0,U.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:we(!0),t(E);case 2:case"end":return S.stop()}},o)})),children:"\u7AEF\u70B9\u5206\u914D"},"config"),(0,a.jsx)(i.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u8BB0\u5F55\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:(0,b.Z)((0,U.Z)().mark(function o(){return(0,U.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,X.fn(h.RD,E.id);case 2:ye.current&&ye.current.reload();case 3:case"end":return S.stop()}},o)})),children:(0,a.jsx)("a",{href:"#",children:"\u5220\u9664"},"delete")},"popconfirm")]}}],je=[{title:"\u7AEF\u70B9\u540D\u79F0",dataIndex:"label"},{title:"\u7AEF\u70B9\u8DEF\u5F84",dataIndex:"pattern"},{title:"\u8BF7\u6C42\u65B9\u6CD5",align:"center",dataIndex:"method",valueType:"select",valueEnum:{POST:{text:"POST"},PUT:{text:"PUT"},GET:{text:"GET"},DELETE:{text:"DELETE"}},render:function(Z,E){return(0,a.jsx)(M.Z,{color:De.methodMap[E.method].color,children:De.methodMap[E.method].text})}}],Y=Oe().concat(je,{title:"\u64CD\u4F5C",align:"center",key:"option",valueType:"option",render:function(Z,E){return[(0,a.jsx)(i.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u8BB0\u5F55\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:(0,b.Z)((0,U.Z)().mark(function o(){return(0,U.Z)().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,X.fn(h.W0,{menuId:p==null?void 0:p.id,endpointId:E.id});case 2:me.current&&me.current.reload();case 3:case"end":return S.stop()}},o)})),children:(0,a.jsx)("a",{href:"#",children:"\u5220\u9664"},"delete")},"popconfirm")]}});return(0,a.jsxs)(ie.ZP,{header:{breadcrumb:{}},children:[(0,a.jsx)(le.ZP,{columns:Ne,actionRef:ye,request:h.DC,footer:function(){return""},postData:function(Z){return w(Z),Z},rowKey:"id",pagination:!1,expandable:{expandRowByClick:!1},search:!1,dateFormatter:"string",headerTitle:"\u83DC\u5355\u7BA1\u7406",toolBarRender:function(){return[(0,a.jsxs)(z.Z,{type:"primary",onClick:function(){var E;Q==null||(E=Q.current)===null||E===void 0||E.resetFields(),t(void 0),C(!0)},children:[(0,a.jsx)(re.Z,{})," \u65B0\u5EFA"]},"primary")]}}),V&&(0,a.jsx)(Me,{formRef:Q,visible:ve,initialValues:p||{type:l.FOLDER},isAdd:!(p!=null&&p.id),menuDataList:V,onVisibleChange:function(Z){if(Z){var E;Q==null||(E=Q.current)===null||E===void 0||E.resetFields()}else C(!1),t(void 0)},onFinish:function(){var F=(0,b.Z)((0,U.Z)().mark(function Z(E){var o,te,S;return(0,U.Z)().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(o=(0,I.Z)((0,I.Z)({},p),E),o.id){_.next=7;break}return _.next=4,X.ii(o,h.bL);case 4:te=_.sent,_.next=10;break;case 7:return _.next=9,X.He(o,h._8);case 9:te=_.sent;case 10:te&&(C(!1),Q==null||(S=Q.current)===null||S===void 0||S.resetFields(),ye.current&&ye.current.reload());case 11:case"end":return _.stop()}},Z)}));return function(Z){return F.apply(this,arguments)}}()}),(0,a.jsx)(ee.Z,{title:p==null?void 0:p.name,width:800,visible:Be,onClose:function(){we(!1)},closable:!1,children:Be&&(0,a.jsx)(le.ZP,{actionRef:me,columns:Y,params:{menuId:p==null?void 0:p.id},request:h.t7,onLoad:function(Z){v(Z.map(function(E){return E.id}))},rowKey:"id",pagination:{showQuickJumper:!0},search:!1,dateFormatter:"string",headerTitle:p==null?void 0:p.name,toolBarRender:function(){return[(0,a.jsxs)(z.Z,{type:"primary",onClick:function(){xe(!0)},children:[(0,a.jsx)(re.Z,{})," \u65B0\u5EFA"]},"primary")]}})}),H&&(0,a.jsx)(T.Z,{title:"\u5206\u914D\u7AEF\u70B9",visible:H,onOk:function(){(0,h.dc)(p==null?void 0:p.id,Ue).then(function(){var Z;ne(void 0),(Z=me.current)===null||Z===void 0||Z.reload(),xe(!1)})},onCancel:function(){ne(void 0),xe(!1)},children:(0,a.jsx)(le.ZP,{columns:je,rowSelection:{selectedRowKeys:Ue,onChange:function(Z){ne(Z)},getCheckboxProps:function(Z){return{disabled:f.indexOf(Z.id)>-1}}},params:{menuId:p==null?void 0:p.id},request:h.BD,rowKey:"id",pagination:{showQuickJumper:!0},search:!1,options:!1,defaultSize:"small",dateFormatter:"string"})})]})},Te=$e},85833:function(pe,k,e){"use strict";e.d(k,{DC:function(){return u},_8:function(){return ue},bL:function(){return A},RD:function(){return W},t7:function(){return re},W0:function(){return le},dc:function(){return h},BD:function(){return Pe}});var R=e(39428),T=e(3182),P=e(90102),ee=e(45254),I=e(50208),L=(0,ee.Ui)("/menu"),z=(0,ee.Ui)("/endpoint");function u(s){return i.apply(this,arguments)}function i(){return i=(0,T.Z)((0,R.Z)().mark(function s(m){return(0,R.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",P.gh(L,m));case 1:case"end":return r.stop()}},s)})),i.apply(this,arguments)}function U(s){return b.apply(this,arguments)}function b(){return b=_asyncToGenerator(_regeneratorRuntime().mark(function s(m){return _regeneratorRuntime().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",YuApi.getById(m,L));case 1:case"end":return r.stop()}},s)})),b.apply(this,arguments)}function ue(s){return J.apply(this,arguments)}function J(){return J=(0,T.Z)((0,R.Z)().mark(function s(m){return(0,R.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",P.Vx(L,m));case 1:case"end":return r.stop()}},s)})),J.apply(this,arguments)}function A(s){return M.apply(this,arguments)}function M(){return M=(0,T.Z)((0,R.Z)().mark(function s(m){return(0,R.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",P.IH(m,L));case 1:case"end":return r.stop()}},s)})),M.apply(this,arguments)}function W(s){return D.apply(this,arguments)}function D(){return D=(0,T.Z)((0,R.Z)().mark(function s(m){return(0,R.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",P.Jp(m,L));case 1:case"end":return r.stop()}},s)})),D.apply(this,arguments)}function re(s){return ie.apply(this,arguments)}function ie(){return ie=(0,T.Z)((0,R.Z)().mark(function s(m){return(0,R.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",P.et("".concat(L,"/").concat(m.menuId,"/endpoints"),m));case 1:case"end":return r.stop()}},s)})),ie.apply(this,arguments)}function le(s){return X.apply(this,arguments)}function X(){return X=(0,T.Z)((0,R.Z)().mark(function s(m){return(0,R.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,I.WY)("".concat(L,"/").concat(m.menuId,"/endpoints/").concat(m.endpointId),{method:"delete"}));case 1:case"end":return r.stop()}},s)})),X.apply(this,arguments)}function h(s,m){return ce.apply(this,arguments)}function ce(){return ce=(0,T.Z)((0,R.Z)().mark(function s(m,B){return(0,R.Z)().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.abrupt("return",(0,I.WY)("".concat(L,"/").concat(m,"/endpoints"),{method:"POST",data:{endpointIds:B}}));case 1:case"end":return $.stop()}},s)})),ce.apply(this,arguments)}function Pe(s){return se.apply(this,arguments)}function se(){return se=(0,T.Z)((0,R.Z)().mark(function s(m){return(0,R.Z)().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",P.et(z,m));case 1:case"end":return r.stop()}},s)})),se.apply(this,arguments)}},59301:function(pe,k,e){"use strict";e.r(k),e.d(k,{default:function(){return Le}});var R=e(32157),T=e(7573),P=e(11849),ee=e(57663),I=e(71577),L=e(62350),z=e(24565),u=e(39428),i=e(3182),U=e(49111),b=e(19650),ue=e(94233),J=e(51890),A=e(2824),M=e(63258),W=e(26271),D=e(30909),re=e(89366),ie=e(49101),le=e(1351),X=e(76629),h=e(67294),ce=e(78009),Pe=e(40759),se=e(952),s=e(71975),m=e(90102),B=e(50208),r=e(45254),$=(0,r.Ui)("/role");function a(f){return Fe.apply(this,arguments)}function Fe(){return Fe=(0,i.Z)((0,u.Z)().mark(function f(v){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",m.LV($,v));case 1:case"end":return n.stop()}},f)})),Fe.apply(this,arguments)}function He(f){return Me.apply(this,arguments)}function Me(){return Me=_asyncToGenerator(_regeneratorRuntime().mark(function f(v){return _regeneratorRuntime().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",YuApi.getById(v,$));case 1:case"end":return n.stop()}},f)})),Me.apply(this,arguments)}function De(f){return Ce.apply(this,arguments)}function Ce(){return Ce=(0,i.Z)((0,u.Z)().mark(function f(v){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",m.Vx($,v));case 1:case"end":return n.stop()}},f)})),Ce.apply(this,arguments)}function Oe(f){return l.apply(this,arguments)}function l(){return l=(0,i.Z)((0,u.Z)().mark(function f(v){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",m.IH(v,$));case 1:case"end":return n.stop()}},f)})),l.apply(this,arguments)}function Se(f){return he.apply(this,arguments)}function he(){return he=(0,i.Z)((0,u.Z)().mark(function f(v){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",m.Jp(v,$));case 1:case"end":return n.stop()}},f)})),he.apply(this,arguments)}function $e(f){return Te.apply(this,arguments)}function Te(){return Te=(0,i.Z)((0,u.Z)().mark(function f(v){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,B.WY)("".concat($,"/").concat(v.roleId,"/menus"),{method:"POST",data:{menuIds:v.menuIds}}));case 1:case"end":return n.stop()}},f)})),Te.apply(this,arguments)}function fe(f){return x.apply(this,arguments)}function x(){return x=(0,i.Z)((0,u.Z)().mark(function f(v){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,B.WY)("".concat($,"/").concat(v,"/menus"),{method:"GET"}));case 1:case"end":return n.stop()}},f)})),x.apply(this,arguments)}function ge(f){return ve.apply(this,arguments)}function ve(){return ve=(0,i.Z)((0,u.Z)().mark(function f(v){return(0,u.Z)().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("roleId",v.roleId),n.abrupt("return",m.LV("".concat($,"/").concat(v.roleId,"/users"),v));case 2:case"end":return n.stop()}},f)})),ve.apply(this,arguments)}var C=e(75159),Ze=e(5966),Ee=e(90672),p=e(71550),t=e(85893),oe=function(v){return(0,t.jsxs)(p.Z,(0,P.Z)((0,P.Z)({},v),{},{children:[(0,t.jsx)(Ze.Z,{rules:[{required:!0,message:"\u89D2\u8272\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],label:"\u89D2\u8272\u540D\u79F0",name:"name"}),(0,t.jsx)(Ze.Z,{rules:[{required:!0,message:"\u89D2\u8272\u7F16\u53F7\u4E3A\u5FC5\u586B\u9879"}],label:"\u89D2\u8272\u7F16\u53F7",name:"code"}),(0,t.jsx)(Ee.Z,{label:"\u63CF\u8FF0",name:"remark"})]}))},O=oe,V=e(85833),w=e(88456),N=e(57895),Ae=e(66988),Be=e.n(Ae),we=function f(v){var G=[];return Array.isArray(v)&&(v==null||v.forEach(function(n){var H={};H.key=n.id,H.title=n.name,w.MenuTypeEnum[n.type]===w.MenuTypeEnum.FOLDER?H.icon=(0,t.jsx)(M.Z,{}):w.MenuTypeEnum[n.type]===w.MenuTypeEnum.MENU?H.icon=(0,t.jsx)(W.Z,{}):H.icon=(0,t.jsx)(D.Z,{}),H.children=n.children?f(n.children):[],G.push(H)})),G},Ve=function(){var v=(0,h.useState)(!1),G=(0,A.Z)(v,2),n=G[0],H=G[1],xe=(0,h.useState)(!1),Q=(0,A.Z)(xe,2),ye=Q[0],me=Q[1],q=(0,h.useRef)(),Re=(0,h.useRef)(),Ue=(0,h.useRef)(),ne=(0,h.useRef)(),Ne=(0,h.useState)(),je=(0,A.Z)(Ne,2),Y=je[0],F=je[1],Z=(0,h.useState)(),E=(0,A.Z)(Z,2),o=E[0],te=E[1],S=(0,h.useState)(),Ge=(0,A.Z)(S,2),_=Ge[0],Xe=Ge[1],qe=(0,h.useState)(),Ye=(0,A.Z)(qe,2),Ie=Ye[0],be=Ye[1],_e=(0,h.useState)(!0),Je=(0,A.Z)(_e,2),We=Je[0],en=Je[1],nn=(0,h.useState)("tab1"),ke=(0,A.Z)(nn,2),Ke=ke[0],rn=ke[1],ze=function(d){be(d)};(0,h.useEffect)(function(){(0,V.DC)().then(function(j){Xe(we(j.data))})},[]);var tn=[{dataIndex:"avatar",title:"\u5934\u50CF",align:"center",valueType:"avatar",width:150,render:function(d,y){return(0,t.jsx)(b.Z,{children:y.portraitUrl?(0,t.jsx)(J.C,{src:"/".concat("api","/").concat(y.portraitUrl)}):(0,t.jsx)(J.C,{icon:(0,t.jsx)(re.Z,{})})})}},{title:"\u7528\u6237\u8D26\u53F7",tip:"\u7528\u6237\u8D26\u53F7\u662F\u552F\u4E00\u7684 key",dataIndex:"username"},{title:"\u7528\u6237\u6635\u79F0",dataIndex:"name"},{title:"\u6240\u5C5E\u90E8\u95E8",dataIndex:"deptFullName",search:!1},{title:"\u521B\u5EFA\u65F6\u95F4",align:"center",sorter:!0,search:!1,dataIndex:"createTime",valueType:"dateTime"}],Qe=[{title:"\u89D2\u8272\u540D\u79F0",dataIndex:"name"},{title:"\u89D2\u8272\u7F16\u53F7",tip:"\u89D2\u8272\u7F16\u53F7\u662F\u552F\u4E00\u7684 key",dataIndex:"code",hideInForm:!0},{title:"\u63CF\u8FF0",dataIndex:"remark",ellipsis:!0,search:!1,valueType:"textarea"},{title:"\u521B\u5EFA\u65F6\u95F4",align:"center",sorter:!0,search:!1,dataIndex:"createTime",valueType:"dateTime"},{title:"\u64CD\u4F5C",align:"center",dataIndex:"option",valueType:"option",render:function(d,y){return[(0,t.jsx)("a",{onClick:function(){F(y),H(!0)},children:"\u7F16\u8F91"},"update"),(0,t.jsx)("a",{onClick:(0,i.Z)((0,u.Z)().mark(function g(){return(0,u.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.t0=be,c.next=3,fe(y.id);case 3:c.t1=c.sent,c.t2=[],c.t3={checked:c.t1,halfChecked:c.t2},(0,c.t0)(c.t3),me(!0),F(y);case 9:case"end":return c.stop()}},g)})),children:"\u6743\u9650\u5206\u914D"},"config"),(0,t.jsx)(z.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u8BB0\u5F55\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:(0,i.Z)((0,u.Z)().mark(function g(){return(0,u.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,C.fn(Se,y.id);case 2:ne.current&&ne.current.reload();case 3:case"end":return c.stop()}},g)})),children:(0,t.jsx)("a",{href:"#",children:"\u5220\u9664"},"delete")},"deleteConfirm")]}}];return(0,t.jsx)(ce.ZP,{header:{breadcrumb:{}},children:(0,t.jsxs)(N.ZP,{split:"vertical",children:[(0,t.jsxs)(N.ZP,{children:[(0,t.jsx)(Pe.ZP,{headerTitle:"\u89D2\u8272\u5217\u8868",actionRef:ne,options:!1,rowKey:"id",rowClassName:function(d){return d.id===(o==null?void 0:o.id)?Be()["role-row-select-active"]:""},onRow:function(d){return{onClick:function(){var g;te(d),F(d),Re==null||(g=Re.current)===null||g===void 0||g.setFieldsValue(d)}}},search:{filterType:"light"},toolBarRender:function(){return[(0,t.jsxs)(I.Z,{type:"primary",onClick:function(){var y;q==null||(y=q.current)===null||y===void 0||y.resetFields(),F(void 0),H(!0)},children:[(0,t.jsx)(ie.Z,{})," \u65B0\u5EFA"]},"primary"),(0,t.jsx)(I.Z,{onClick:function(){return en(!We)},children:We?(0,t.jsx)(le.Z,{}):(0,t.jsx)(X.Z,{})})]},request:a,columns:We?Qe.filter(function(j){return!["remark","createTime"].includes(j.dataIndex)}):Qe}),(0,t.jsx)(O,{width:"500px",title:Y!=null&&Y.id?"\u66F4\u65B0\u89D2\u8272":"\u65B0\u5EFA\u89D2\u8272",visible:n,onVisibleChange:function(d){if(d){var y;q==null||(y=q.current)===null||y===void 0||y.resetFields()}else H(!1),F(void 0)},formRef:q,initialValues:Y||{},onFinish:function(){var j=(0,i.Z)((0,u.Z)().mark(function d(y){var g,K,c;return(0,u.Z)().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(g=(0,P.Z)((0,P.Z)({},Y),y),g.id){de.next=7;break}return de.next=4,C.ii(g,Oe);case 4:K=de.sent,de.next=10;break;case 7:return de.next=9,C.He(g,De);case 9:K=de.sent;case 10:K&&(H(!1),q==null||(c=q.current)===null||c===void 0||c.resetFields(),ne.current&&ne.current.reload());case 11:case"end":return de.stop()}},d)}));return function(d){return j.apply(this,arguments)}}()}),(0,t.jsx)(s.a,{title:"\u6743\u9650\u5206\u914D",width:"600",visible:ye,onVisibleChange:function(d){me(d),d||be({checked:[],halfChecked:[]})},onFinish:(0,i.Z)((0,u.Z)().mark(function j(){var d,y;return(0,u.Z)().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return d={roleId:Y==null?void 0:Y.id,menuIds:Ie==null?void 0:Ie.checked},K.next=3,C.pr(d,$e,"\u6743\u9650\u5206\u914D");case 3:y=K.sent,y&&me(!1);case 5:case"end":return K.stop()}},j)})),children:(0,t.jsx)(se.ZP.Item,{name:"menuIds",children:(0,t.jsx)(T.Z,{checkable:!0,showIcon:!0,checkStrictly:!0,defaultExpandAll:!0,onCheck:ze,checkedKeys:Ie,treeData:_})})})]}),We&&(0,t.jsxs)(N.ZP,{colSpan:"50%",title:"\u5F53\u524D\u89D2\u8272\uFF1A"+(o?o.name:""),tabs:{tabPosition:"top",activeKey:Ke,onChange:function(d){rn(d)}},children:[(0,t.jsx)(N.ZP.TabPane,{tab:"\u57FA\u672C\u4FE1\u606F",children:Ke==="tab1"&&(0,t.jsx)(O,{style:{textAlign:"center"},formType:"ProForm",formRef:Re,initialValues:Y||{},onFinish:function(){var j=(0,i.Z)((0,u.Z)().mark(function d(y){var g,K;return(0,u.Z)().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:if(g=(0,P.Z)((0,P.Z)({},Y),y),g.id){ae.next=7;break}return ae.next=4,C.ii(g,Oe);case 4:K=ae.sent,ae.next=10;break;case 7:return ae.next=9,C.He(g,De);case 9:K=ae.sent;case 10:K&&ne.current&&ne.current.reload();case 11:case"end":return ae.stop()}},d)}));return function(d){return j.apply(this,arguments)}}()})},"tab1"),(0,t.jsx)(N.ZP.TabPane,{tab:"\u6743\u9650",children:Ke==="tab2"&&(0,t.jsx)(se.ZP,{style:{textAlign:"center"},params:{id:Y==null?void 0:Y.id},formRef:Ue,request:function(){var j=(0,i.Z)((0,u.Z)().mark(function d(y){var g;return(0,u.Z)().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,fe(y.id);case 2:return g=c.sent,be({checked:Object.values(g),halfChecked:[]}),c.abrupt("return",Promise.resolve(g));case 5:case"end":return c.stop()}},d)}));return function(d){return j.apply(this,arguments)}}(),children:(0,t.jsx)(se.ZP.Item,{name:"menuIds",children:(0,t.jsx)(T.Z,{checkable:!0,showIcon:!0,checkStrictly:!0,defaultExpandAll:!0,onCheck:ze,checkedKeys:Ie,treeData:_})})})},"tab2"),(0,t.jsx)(N.ZP.TabPane,{tab:"\u4EBA\u5458",children:Ke==="tab3"&&(0,t.jsx)(Pe.ZP,{columns:tn,rowKey:"id",params:{roleId:o==null?void 0:o.id},request:ge,search:!1,dateFormatter:"string",options:!1})},"tab3")]})]})})},Le=Ve}}]);
